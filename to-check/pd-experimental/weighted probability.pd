#N canvas 469 248 717 300 10;
#N canvas 252 207 941 502 weighted_probability 0;
#X obj 126 310 +;
#X obj 148 310 f;
#X msg 232 189 0;
#X obj 126 289 packel;
#X obj 72 95 list length;
#X obj 72 133 until;
#X obj 126 249 list;
#X obj 125 154 f;
#X obj 150 153 + 1;
#X msg 136 126 0;
#X obj 167 263 + 1;
#X obj 72 114 - 1;
#X obj 308 170 random 100;
#X obj 308 189 / 100;
#X obj 190 288 packel;
#X obj 223 269 + 2;
#X obj 126 268 t a a;
#X obj 190 310 +;
#X obj 212 310 f;
#X obj 121 24 list prepend 0;
#X obj 308 251 t f f;
#X obj 267 392 &&;
#X obj 126 175 t b f f f;
#X obj 367 430 f;
#X obj 267 413 sel 1;
#X obj 214 375 <=;
#X obj 282 371 >;
#X obj 382 361 + 1;
#X text 406 47 input a NORMALIZERD probability list and output a randomized
group index following the probability distribution. ie: if we enter
0.2 0.4 0.1 0.3 as a list \, we eill get the index of the group (1
\, 2 3 or 4) depending on the result of throwing the dice.;
#X obj 121 5 inlet;
#X obj 457 447 outlet;
#X obj 121 44 t a b a b b a;
#X obj 456 205 sum;
#X obj 461 268 sel 0;
#X msg 461 297 -1;
#X text 480 203 in case the list is allzero \, output a '-1' to indicate
that no group can be selected.;
#X connect 0 0 1 0;
#X connect 0 0 25 0;
#X connect 1 0 0 1;
#X connect 2 0 0 1;
#X connect 2 0 17 1;
#X connect 3 0 0 0;
#X connect 4 0 11 0;
#X connect 5 0 7 0;
#X connect 6 0 16 0;
#X connect 7 0 8 0;
#X connect 7 0 22 0;
#X connect 8 0 7 1;
#X connect 9 0 7 1;
#X connect 10 0 3 1;
#X connect 11 0 5 0;
#X connect 12 0 13 0;
#X connect 13 0 20 0;
#X connect 14 0 17 0;
#X connect 15 0 14 1;
#X connect 16 0 3 0;
#X connect 16 1 14 0;
#X connect 17 0 18 0;
#X connect 17 0 26 0;
#X connect 18 0 17 1;
#X connect 19 0 31 0;
#X connect 20 0 25 1;
#X connect 20 1 26 1;
#X connect 21 0 24 0;
#X connect 22 0 6 0;
#X connect 22 1 10 0;
#X connect 22 2 15 0;
#X connect 22 3 27 0;
#X connect 23 0 30 0;
#X connect 24 0 23 0;
#X connect 25 0 21 0;
#X connect 26 0 21 1;
#X connect 27 0 23 1;
#X connect 29 0 19 0;
#X connect 31 0 4 0;
#X connect 31 1 9 0;
#X connect 31 2 6 1;
#X connect 31 3 2 0;
#X connect 31 4 12 0;
#X connect 31 5 32 0;
#X connect 32 0 33 0;
#X connect 33 0 34 0;
#X connect 34 0 30 0;
#X restore 109 171 pd weighted_probability;
#X msg 109 46 1 3 0 7 10;
#X obj 61 146 print;
#X text 182 37 lista con probabilidades. No normalizada (porque el
umbral puede haber convertido algunos valores a 0);
#X text 222 91 Normalizar la lista dividiendo por la suma de todas
las probabilidades.;
#X floatatom 109 198 5 0 0 0 - - -;
#X text 256 152 Genero un # aleatorio entre 0 y 1 Luego analizo la
lista para buscar si el número aleatorio está entre el elemento n-1
y n. Una vez encuentro entre que valores está el número aleatorio
reporto el índice del elemento de la lista (one based).;
#N canvas 756 362 450 300 list_normlaize 0;
#X obj 154 134 t a a;
#X obj 235 151 sum;
#N canvas 462 352 450 300 list_divide 0;
#X obj 26 12 inlet;
#X obj 281 46 inlet;
#X obj 39 251 outlet;
#X obj 138 100 list append;
#X obj 61 83 t b a;
#X obj 61 62 list split 1;
#X obj 75 126 /;
#X obj 250 145 list;
#X msg 267 99 bang;
#X obj 67 150 list prepend;
#X obj 34 40 t b a b;
#X obj 35 163 list;
#X text 165 217 divide a list by a given number;
#X connect 0 0 10 0;
#X connect 1 0 6 1;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 4 1 6 0;
#X connect 5 0 4 0;
#X connect 5 1 3 1;
#X connect 6 0 9 0;
#X connect 7 0 9 1;
#X connect 8 0 7 1;
#X connect 8 0 9 1;
#X connect 9 0 7 0;
#X connect 9 0 11 1;
#X connect 10 0 11 0;
#X connect 10 1 5 0;
#X connect 10 2 8 0;
#X connect 11 0 2 0;
#X restore 154 169 pd list_divide;
#X obj 154 110 inlet;
#X obj 154 191 outlet;
#X connect 0 0 2 0;
#X connect 0 1 1 0;
#X connect 1 0 2 1;
#X connect 2 0 4 0;
#X connect 3 0 0 0;
#X restore 109 100 pd list_normlaize;
#X obj 160 144 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X connect 0 0 5 0;
#X connect 1 0 7 0;
#X connect 7 0 2 0;
#X connect 7 0 0 0;
#X connect 8 0 0 0;
